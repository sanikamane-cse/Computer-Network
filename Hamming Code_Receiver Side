#include <iostream>
using namespace std;

int main() {
    int code[11];  // 1-based indexing (1â€“11)
    int i, p1, p2, p4, p8, error = 0;

    cout << "Enter received 11-bit Hamming code: ";
    for (i = 1; i <= 11; i++)
        cin >> code[i];

    // Recalculate parity bits
    p1 = code[1] ^ code[3] ^ code[5] ^ code[7] ^ code[9] ^ code[11];
    p2 = code[2] ^ code[3] ^ code[6] ^ code[7] ^ code[10] ^ code[11];
    p4 = code[4] ^ code[5] ^ code[6] ^ code[7];
    p8 = code[8] ^ code[9] ^ code[10] ^ code[11];

    // Determine error position
    error = (p8 * 8) + (p4 * 4) + (p2 * 2) + (p1 * 1);

    if (error == 0) {
        cout << "\nNo error detected in the received code.\n";
    } else {
        cout << "\nError detected at bit position: " << error << endl;
        code[error] = code[error] ^ 1;  // Correct the error
        cout << "Error corrected successfully.\n";
    }

    // Display corrected Hamming code
    cout << "\nCorrected 11-bit Hamming Code: ";
    for (i = 1; i <= 11; i++)
        cout << code[i];

    // Extract original 7-bit message (data bits only)
    cout << "\nActual 7-bit Message (Data bits): ";
    cout << code[3] << " " << code[5] << " " << code[6] << " " << code[7]
         << " " << code[9] << " " << code[10] << " " << code[11] << endl;

    return 0;
}
